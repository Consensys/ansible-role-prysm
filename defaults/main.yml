---
# User and group
prysm_user: prysm
prysm_group: "{{ prysm_user }}"
prysm_architecture: "amd64" 
# Version to install - linux only!
prysm_download_beacon_url: "https://github.com/prysmaticlabs/prysm/releases/download/{{ prysm_version }}/beacon-chain-{{ prysm_version }}-linux-{{prysm_architecture}}"
prysm_download_validator_url: "https://github.com/prysmaticlabs/prysm/releases/download/{{ prysm_version }}/validator-{{ prysm_version }}-linux-{{prysm_architecture}}"

# Directory paths
prysm_base_dir: "/opt/prysm/"
prysm_install_dir: "{{ prysm_base_dir }}/prysm-{{ prysm_version }}"
prysm_current_dir: "{{ prysm_base_dir }}/current"
prysm_data_dir: "{{ prysm_base_dir }}/data"
prysm_data_beacon_dir: "{{ prysm_data_dir }}/dir"
prysm_config_dir: "/etc/prysm"
prysm_log_dir: "/var/log/prysm"
prysm_output_transition_dir: "/tmp/prysm"
prysm_node_private_key_file: ""
prysm_config_template: "prysm.yml.j2"
besu_profile_file: "/etc/profile.d/prysm-path.sh"

# Logging
prysm_log_level: INFO
prysm_log_color_enabled: False
prysm_log_destination: 'DEFAULT_BOTH'
prysm_log_filename: "{{ prysm_log_dir }}/prysm.log"
prysm_log_filename_pattern: 'prysm_%d{yyyy-MM-dd}.log'
prysm_log_include_events_enabled: False

# Managed service config
prysm_managed_service: true
prysm_systemd_state: restarted
prysm_systemd_template: prysm.service.j2
prysm_systemd_dir: /etc/systemd/system
prysm_launchd_template: tech.pegasyseng.prysm.plist.j2
prysm_launchd_dir: /Library/LaunchAgents

# prysm config
prysm_network: minimal
prysm_initial_state: ""
prysm_host_ip: ""
prysm_default_ip: "127.0.0.1"

#node
prysm_p2p_enabled: "True"
prysm_p2p_interface: 0.0.0.0
prysm_p2p_port: 9000
prysm_p2p_advertised_port: 9000
prysm_p2p_discovery_enabled: "True"

#interop
prysm_interop_genesis_time: 0
prysm_interop_owned_validator_start_index: 0
prysm_interop_owned_validator_count: 64
prysm_interop_number_of_validators: 64
prysm_interop_enabled: "False"
#validators
prysm_validators_key_file: ""
#deposit
prysm_deposit_mode: "normal"
prysm_deposit_input_file: "" #"validator_test_data.json"
prysm_deposit_number_validators: 64
prysm_deposit_contract_address: "0x"
prysm_deposit_eth1_endpoint: ""

prysm_metrics_enabled: "True"
prysm_metrics_interface: 0.0.0.0
prysm_metrics_host_allowlist: ["*"]
prysm_metrics_port: 8008
prysm_metrics_categories: []

prysm_data_path: "/data"
prysm_data_storage_mode: "prune"

prysm_beacon_rest_api_port: 5051
prysm_beacon_rest_api_docs_enabled: "False"
prysm_beacon_rest_api_enabled: "True"
prysm_beacon_rest_api_interface: "127.0.0.1"
prysm_beacon_rest_api_host_allowlist: ["*"]

prysm_cmdline_args: ""
# Using an internal variable for setting the configuration. This avoids circular reference.
prysm_cmdline_args_internal: "{{ prysm_cmdline_args }}"
prysm_cmdline_args_beacon: "{{ prysm_cmdline_args }}"
prysm_cmdline_args_validator: "{{ prysm_cmdline_args }}"
prysm_env_opts: ""
# Using an internal variable for setting the configuration. This avoids circular reference.
prysm_env_opts_internal: "{{ prysm_env_opts }}"
prysm_env_opts_beacon: "{{ prysm_env_opts }}"
prysm_env_opts_validator: "{{ prysm_env_opts }}"

prysm_validator_key_files: []
prysm_validator_key_password_files: []

# internal state to maintain idempotency
prysm_state_updates: []
prysm_state_updates_validator: []
prysm_state_updates_beacon: []

# Defaults for monolith service for backward compatibility
prysm_sub_command: ''
prysm_log_file: "{{ prysm_log_dir }}/prysm.log"
prysm_config_file: "{{ prysm_config_dir }}/prysm.yml"

# determine whether to run as standalone validator client. Default is not to run standalone validator
prysm_beacon_enabled: True
prysm_standalone_validator: "{{ not prysm_beacon_enabled | bool }}"

# Configuration for monolith prysm client
prysm_monolith_service_name: 'prysm'
prysm_monolith_service_file: "{{ prysm_systemd_dir }}/prysm.service"
prysm_monolith_log_file: "{{ prysm_log_dir }}/prysm.log"
prysm_monolith_config_file: "{{ prysm_config_dir }}/prysm.yml"

# Configuration for standalone validator client
prysm_validator_service_name: 'prysm-validator'
prysm_validator_service_file: "{{ prysm_systemd_dir }}/prysm-validator.service"
prysm_validator_log_file: "{{ prysm_log_dir }}/prysm-validator.log"
prysm_validator_config_file: "{{ prysm_config_dir }}/prysm-validator.yml"
prysm_validator_metrics_port: '8009'

# Configuration for standalone beacon client
prysm_beacon_service_name: 'prysm'
prysm_beacon_service_file: "{{ prysm_systemd_dir }}/prysm.service"
prysm_beacon_log_file: "{{ prysm_log_dir }}/prysm.log"
prysm_beacon_config_file: "{{ prysm_config_dir }}/prysm.yml"
prysm_beacon_metrics_port: '8008'
